# 外星人入侵 (Alien Invasion)
这是一个基于 Python 和 Pygame 开发的 2D 街机射击游戏。本项目遵循《Python编程：从入门到实践（第3版）》第 14 章的教程，并在此基础上进行了扩展功能开发（外星人反击+记录历史最高分）。

## 游戏简介
玩家控制一艘飞船在屏幕底部左右移动，任务是消灭一群向下移动的外星人舰队。如果外星人到达屏幕底部或撞击飞船，玩家将失去一艘飞船。消灭所有外星人后，游戏难度会提升（速度加快）。

## 功能特性
*   **基础玩法**：飞船移动、射击、外星人舰队移动与下落。
*   **记分系统**：
    *   实时显示当前得分。
    *   显示当前等级。
    *   显示剩余飞船数量（生命值）。
*   **最高分记录**：游戏会自动将最高分保存到本地文件 (`high_score.txt`)，关闭游戏后记录依然存在。
*   **动态难度**：每清除一波外星人，游戏速度和外星人分值都会增加。
*   **扩展功能**：
    *   **外星人反击**：外星人现在会随机向下发射红色子弹，增加了游戏难度和趣味性。

## 环境要求
*   Python 3.x
*   Pygame 库

## 安装与运行
1.  **克隆或下载本项目** 

2.  **安装依赖库**：
    确保你已经安装了 `pygame`。如果没有，请在终端运行：
    ```bash
    pip install pygame
    ```

3.  **运行游戏**：
    在项目根目录下，运行主程序文件：
    ```bash
    python alien_invasion.py
    ```

## 操作说明
*   **启动游戏**：点击屏幕中央的 **Play** 按钮。
*   **移动**：
    *   `←` (左箭头)：向左移动
    *   `→` (右箭头)：向右移动
*   **射击**：
    *   `Space` (空格键)：发射子弹
*   **退出**：
    *   `Q` 键：退出游戏

## 项目结构
*   `alien_invasion.py`: **主程序入口**，负责游戏循环和事件处理。
*   `settings.py`: 包含所有游戏设置（屏幕尺寸、速度、颜色等）。
*   `game_stats.py`: 跟踪游戏统计信息（得分、等级、最高分）。
*   `scoreboard.py`: 负责将得分信息渲染到屏幕上。
*   `ship.py`: 管理玩家飞船的行为和绘制。
*   `bullet.py`: 管理玩家发射的子弹。
*   `alien.py`: 管理单个外星人的行为。
*   `alien_bullet.py`: **(新增)** 管理外星人发射的子弹。
*   `button.py`: 用于创建“Play”按钮。
*   `high_score.txt`: 用于持久化存储最高分的文件。
*   `images/`: 存放游戏素材

## 新增内容
1. **外星人可以进行射击**：新增`alien_bullet`类，代码同`bullet`类相似
2. **保留了历史最高分**:
    * 修改了`game_stats.py`中初始化high_score的操作，改为读取文件`high_score.txt`中存储的数字
    * 修改了`alien_invasion.py`中的方法`_check_bullet_alien_collisions()`
    每次射击成功后，该方法会调用方法`check_high_score()`，自动将当前分数同`high_score.txt`中的数字比较，其中的最大值将会保存到`high_score.txt`